# Windowsからインターネットにつながるまで

## DNSの確認

```console
 DnsClientServerAddress

InterfaceAlias               Interface Address ServerAddresses
                             Index     Family
--------------               --------- ------- ---------------
イーサネット                        22 IPv4    {1.1.1.1, 1.0.0.3}
イーサネット                        22 IPv6    {}
```

### DNSはルータとPCの設定のどちらが優先される？

A.PC設定

ルータはDHCPサーバーとしてふるまうため、PCがDHCPからの配信を待つ設定ならルータと同じになる。  
手動でネットワークアダプタにDNSを設定している場合、PC側の設定が使われる。

有名はDNS

- Google
  - 8.8.8.8/8.8.4.4
- Cloudflare
  - [1.1.1.1/1.0.0.1](https://developers.google.com/speed/public-dns/docs/using?hl=ja)
  - [1.1.1.3/1.0.0.3](https://developers.cloudflare.com/1.1.1.1/ip-addresses/)

## 接続を確認する

`https://ipleak.net/`

DNS AddressにCLAUDFLARENETやGOOGLEと書かれていれば成功

## VPNの設定

キルスイッチが有効だと、VPN切断時に外部につながらなくなる。  

キルスイッチ（ソフト）の場合、インターネットアクセスを遮断する。  
キルスイッチ（ハード）の場合、OSのファイアウォールを書き換えてVPNトンネル以外の通信をブロックする。  

キルスイッチ（ハード）は、通信途中にVPNが落ちた瞬間にネイティブ回線を経由してしまう問題を回避することができる。
