# TIPS

## IPアドレスが変わる

AWSはスケーリング時などにIPアドレスが変化する時がある。  
例えば、ElastiCacheのRedisをKeep-Aliveありで接続していたとする。  
この場合、IPアドレスが変化してもアプリ側は検知できないため、古いIPアドレスにアクセスしてしまう。  
これは、AWS側としてはどうしようもないとしている。  

対処方法は無い。  
ただし、一度繋がらなくなったらエラーは返えるが、繋がらなくなったことが判明したらAWSは新しいルーティング先を知らせる。  
これは１秒以内とされている。  
よって、コンシューマー側にリトライの責任を求めるべきである。

「一度、アクセスに失敗したからと言って、すぐバックエンド側に頼るな。リトライぐらいしろ」ということである。  
こんなことを担保するような契約はやめよう。
