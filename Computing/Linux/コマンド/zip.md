# zip

zipを作るときに使われる。

find+xargsとの組み合わせで使われる場合にエラーが発生するケースがある。

## 特殊文字を持つファイル名

- (
- )
- $
- ...

上記のような文字列を持つファイルやフォルダをzipに食わせる場合には文字列をエスケープするもしくはシェルに解釈されないようにする必要がある。

以下のパスのhogeディレクトリを圧縮したいとする。

`./2019-02-19_(25$plan)/hoge`

### bad case

```bash
# ダメなケース
$ find ./ -name "hoge" -print0 | xargs -0 -I{} -P8 bash -c "zip -r \"{}.zip\" \"{}\" && rm -rf \"{}\""
 zip warning: name not matched: ./2019-02-19_(25)/hoge

zip error: Nothing to do! (try: zip -r ./2019-02-19_(25)/hoge.zip . -i ./2019-02-19_(25)/hoge)
```

ダブルクオーテーションを使った文字列を使用した場合、シェルによって文字列展開が行われる。  
よって、`$`以下のディレクトリ名が読み取られず、正しいパスではなくなり見つからなくなっている。  
また、`(`も問題で、これらはすべて`\`によってエスケープされないと正しい文字列として認識されない。

### good case

```bash
# 実行できるケース
find ./ -name "hoge" -print0 | xargs -0 -I{} -P8 bash -c "zip -r '{}.cbz' '{}' && rm -rf '{}'"
```

`''`（シングルクォーテーション）を使った文字列を使用したため、シェルによる文字列展開が行われない。  
よって、そのままの文字列でコマンドが実行される。
