# SSDのRAIDに価値はあるか？

## 感想

2014年とかの話だが、SSDをRAIDして何万枚の画像データを画像処理していたが、劇的に早いと思ったことはないなぁ。

## こんな意見も

- <https://x.com/hasegaw/status/1836458081573834870>

2024年、現在のSSDのスループットは非常に高い。  
この性能を維持したままパリティ保護などをしきるのは結構な無理ゲー感がある。

たとえば、2GB/sの書き込みが可能なドライブがあるとする。  
これを5台のドライブでパリティ保護しようとすると、以下の計算能力が必要になる。

- 入力：8GB/s
- 出力：10GB/s

10GB/sのスループットでパリティを保護しようとすると、ストレージコントローラに負荷がかかって発熱する。  
そのためのデータバスでも相当なエネルギーを使う。

たとえば、HDDの時代に動画編集などの巨大ファイルを扱う場面では、HDDをたくさん並べてプラッタにストライピングすることでスループットを確保した。  
今のフラッシュメモリじゃ一つのユニットの中で多重度を上げてすでに解決しているから、HDDと比べると信頼性・性能・コストのバランスが違う。

もちろん、メールサーバーなどシステム断が許されないものであれば、RAID-1を構成して可用性を優先するケースはあるだろう。  
これは速度ではなくて可用性を高めたいからだ。  
しかし、こと速度を上げるのであれば、SSDはHDDに比べてスループットが高く、レイテンシ小さいため、たいていRAID系がついてこれない。

> 実際、HDDでも数Byteのバイナリみたいな極小のファイルをRAIDしたときは遅くなった経験がある。

ミラーやパリティの複雑な処理を行うぐらいなら、N+1、N+2のノードを動かすような運用で障害に耐える方が美味しい時代である。

> まぁ、K8SとかDBのRead Replicaとかを見てもそうな気がする

つまり、常に多重で管理されているのではなくて、ドライブ障害を検知したらレプリカから新しいレプリカを生み出す方がいいのだ。  
暴力的なスループットがそれを可能にしてくれる。
