# 関数のコール元を探る

最適化によってbacktraceが取れない時にコール元を知る方法を教えてもらったのでメモします。  

## そもそもマシン語がどうやって動いているか

とりあえず、マシンが持つコンピュータの基礎知識を掘り起こしていきましょう。  
大学生ぶりですね……  

※変数＝レジスタ

### CPUを構成するモノ

- アキュムレータ - Accumulator -  
  CPUが計算するときに使うメインの変数。  
  この子が優遇されているのはCPUを単純化するためだそう。  

- 命令レジスタ - Instruction register -  
  CPUが命令を実行するときに命令自体を保持しておく変数  

- Program counter  
  メモリにロードされたプログラムのどこを実行しているのかを記憶するレジスタ。  
  メモリから命令が読みだされると、その分だけPCの値を増やし、次に実行すべき命令が保存されている番地を指し示す。  
  分岐やジャンプは、PCの内容を呼び先のプログラムが格納されているアドレス値を書き換えることで実現される。  
  別称がいっぱいあるなぁ……

- Status register / Flag regsiter
  各ビットにそれぞれ異なる役割を持つレジスタ。  
  特定の命令を実行した結果起きた出来事により状態（フラグ）が変化する。  
  直前の演算で桁あふれしたときなどに特定のビットを立てるなどして使われる。  

- 演算ユニット - Arithmetic and Logic Unit -  
  四則演算や論理演算などの算術処理を行う回路
  ALUと略する場合が多い
